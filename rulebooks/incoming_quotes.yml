---
- name: Listen for events on a webhook
  hosts: localhost

  sources:
    - ansible.eda.webhook:
        host: 0.0.0.0
        port: 5000
 
  rules:
    - name: Kick off mowing quote
      condition: event.payload.emailId is defined
      action:
        run_playbook:
          name: playbooks/pasture_mowing.yml
          extra_vars:
            working_dir: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      39306533663037373963303938646433383539343735613737373832376235313334343935333035
                      6631616339616533623333306138343930653236383533330a653834343663313532363665393734
                      66333534313939653531356533623834383663666134353033313630303639383834323961656635
                      3838303833333536630a333430663264316433613733356138333535376335326163653633333532
                      37613937303431323761336430363163303934366532303663353434653036396663
            webhook_host: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      38346132343034326562613438663666616365363561663863373833643136636133326638343932
                      3230373665363364326238363935383235336461366563330a336332313333346662383863303735
                      31353731383030636539386239313139633134393764613236326432373533656138656266323464
                      6636613635646639340a323737623637356438623436346433306433343035343235326635353732
                      36313531346136633539303733643465306465313737396165393265333636616130656666393931
                      38653634396131613534613532346331393939653162313332326336643731656164613665306330
                      643335313037613864356536323739306338
            webhook_x_from: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      34666536623636656136643038326631353831336632323932313638366135633536646537623064
                      3563336365393061363639356335336231633465333739620a383739336231356139376461313764
                      37623836333039313666366137633365316164393530366161613031356265323332393638373235
                      6434626265336334610a323938613261653064366461353830383561366565303130666663656562
                      62313031633231313134346561306337356564323933313732353731646639613331
            webhook_source: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      33353565663332393935353731643363616333336665323765363739303932303336646464343335
                      3238653365333437343635656536663963636165633933630a663839653030613834316639616430
                      30656434613334366436306262333036353964343933643662656334373263313435363637666239
                      3339613930656236310a313134393933323338373639383665656133323537313763393462653665
                      38373962663465363234663863376439323065646634326139666437613063363163
            webhook_payload_from: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      37613133333637666432356566396130386439323761373738346464323339666439313931643534
                      3866636366323032623337303666333835623431663962370a626631346134663631393132613037
                      30396465376339333066326663363361343434333463383139326334323562396534623266373831
                      3033333037663533300a396565356335646164313866393237373137306234623731336231326635
                      36383361646262653130623931613562643661313135306337336663643765373930
            webhook_api_token: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      66373331376165666364383533623938646532333634333766636632313531376638316266656530
                      6262636439316438383366336365363833626637653031300a346463373436653039656163646438
                      36386136363937666563653263633865613538376164616366643837333238353732303931383237
                      6137656263343764310a383162646330623136303936356234626439313863626439393436353961
                      36386436316236386466333464353036303330616665346239616464356263636563373235396535
                      64666666303461653864663930646435373662336265653738663539333665303639343833333335
                      64303039653539626136346533346438306230623636653738366430373965383236393961333039
                      63343931336239623365
            webhook_url: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      31663933353633356534376563643638303939383337626234636361353739356433386362643865
                      3533383531386135343061336435353033356364373131300a626330306436633536323130333631
                      63663664303235643264613863393166386638643062663134343730383362636664313263663135
                      6532656133643437360a393537376366323339343035666563313131623466643431386461333161
                      31366164633537383463616264623336626264623665333133353565333635646134636238626334
                      3538663632393132633862616337396336363331303534613938
...
