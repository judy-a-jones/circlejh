---
- name: Listen for events on a webhook
  hosts: localhost

  sources:
    - ansible.eda.webhook:
        host: 0.0.0.0
        port: 5000
 
  rules:
    - name: Kick off mowing quote
      condition: event.payload.emailId is defined
      action:
        run_playbook:
          name: playbooks/pasture_mowing.yml
          extra_vars:
            working_dir: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      39306533663037373963303938646433383539343735613737373832376235313334343935333035
                      6631616339616533623333306138343930653236383533330a653834343663313532363665393734
                      66333534313939653531356533623834383663666134353033313630303639383834323961656635
                      3838303833333536630a333430663264316433613733356138333535376335326163653633333532
                      37613937303431323761336430363163303934366532303663353434653036396663
            webhook_host: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      38346132343034326562613438663666616365363561663863373833643136636133326638343932
                      3230373665363364326238363935383235336461366563330a336332313333346662383863303735
                      31353731383030636539386239313139633134393764613236326432373533656138656266323464
                      6636613635646639340a323737623637356438623436346433306433343035343235326635353732
                      36313531346136633539303733643465306465313737396165393265333636616130656666393931
                      38653634396131613534613532346331393939653162313332326336643731656164613665306330
                      643335313037613864356536323739306338
            webhook_source: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      33353565663332393935353731643363616333336665323765363739303932303336646464343335
                      3238653365333437343635656536663963636165633933630a663839653030613834316639616430
                      30656434613334366436306262333036353964343933643662656334373263313435363637666239
                      3339613930656236310a313134393933323338373639383665656133323537313763393462653665
                      38373962663465363234663863376439323065646634326139666437613063363163
            webhook_api_token: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      66373331376165666364383533623938646532333634333766636632313531376638316266656530
                      6262636439316438383366336365363833626637653031300a346463373436653039656163646438
                      36386136363937666563653263633865613538376164616366643837333238353732303931383237
                      6137656263343764310a383162646330623136303936356234626439313863626439393436353961
                      36386436316236386466333464353036303330616665346239616464356263636563373235396535
                      64666666303461653864663930646435373662336265653738663539333665303639343833333335
                      64303039653539626136346533346438306230623636653738366430373965383236393961333039
                      63343931336239623365
            webhook_url: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      31663933353633356534376563643638303939383337626234636361353739356433386362643865
                      3533383531386135343061336435353033356364373131300a626330306436633536323130333631
                      63663664303235643264613863393166386638643062663134343730383362636664313263663135
                      6532656133643437360a393537376366323339343035666563313131623466643431386461333161
                      31366164633537383463616264623336626264623665333133353565333635646134636238626334
                      3538663632393132633862616337396336363331303534613938
            webhook_x_from: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      34343466393030303235353162643031663364326563623066353261316237663866626335346266
                      3766356638343562613661396532383665646434323961390a316538323739326262366230316166
                      34303566386564366634366530636435636363303763373836396131303533333361653562643538
                      3435623031343361390a626365393265386364343037633636666462633461623066336336663533
                      66343137336538363666313866383465386665353465643836633133323763316566
            webhook_payload_from: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      36323062316665333935333865316632646163393762316431633434383461303065373564356164
                      6238366537663266636131636433643732643736376637330a643834383064653630353338306562
                      31623132613833343063333431336535333765613335393830316238303665393236376338623334
                      6134353930313736620a636136333739353233336366386234353331633631643238363164663531
                      61636633646237626631333333653163656239653134666139633562396337363131
            channel: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      37333939323830383139616361376232646538363133353964373661383231346131616534313739
                      3037613930316637383463336666373663346133643662320a336261376337363135656339383132
                      64376466396131383336376639633561396162303334303031653231313432316665303437613261
                      3637663132386636650a626532656633323231613661363964353238393538313035373333613036
                      3064
            token: !vault |
                      $ANSIBLE_VAULT;1.1;AES256
                      64636530633638633336633730396331396163636433343066653730353862653463373936653231
                      6535633230663666326136386539306238633434363061300a663632623334366266306664343965
                      63326263666339373330643461643331346332306566383734643462323662306533346665323166
                      6333633861323862380a366330313132626439386166633164653831653063373632333966356263
                      35643337643932656664366235393163616634636333633434316535393937343030313736623532
                      63323462353230333136316663623136613063666665633038613066613739393935386566363631
                      303466636133646132376236346533303264
...
